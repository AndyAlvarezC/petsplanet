<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.title }}</title>
    <link rel="stylesheet" href="{{ 'product.css' | asset_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="{{ 'logo.png' | asset_url }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ 'cart.css' | asset_url }}">
</head>
<body>
    <div class="producto-contenedor">
        <div class="galeria">
            {% for image in product.images %}
                <img src="{{ image | img_url: 'medium' }}" alt="{{ image.alt }}" class="miniatura" data-color="{{ image.alt }}">
            {% endfor %}
        </div>

        <div class="imagen-principal">
            <img src="{{ product.featured_image | img_url: 'large' }}" alt="Producto principal" id="imagen-principal">
        </div>

        <div class="info-producto">
            <h2>{{ product.title }}</h2>
            <h3 class="precio">
                <span class="precio-descuento" id="precio-descuento">{{ product.price | money }}</span>
                {% if product.compare_at_price > product.price %}
                    <span class="precio-original">{{ product.compare_at_price | money }}</span>
                {% endif %}
            </h3>

            <p>{{ product.description }}</p>
            <div class="resenas">
                <div class="puntuacion">
                    <span class="estrellas">
                        {% for i in (1..5) %}
                            <i class="fas fa-star{% if i <= product.rating %}-half-alt{% endif %}"></i>
                        {% endfor %}
                    </span>
                    <span class="puntuacion-numero">{{ product.rating }}</span>
                </div>
                <div class="detalle-resenas">
                    <span class="num-resenas">{{ product.reviews_count }} valoraciones</span>
                    <span>|</span>
                </div>
                <span class="productos-vendidos">{{ product.sold_count }} vendidos</span>
            </div>

            <hr>

            <div class="colores">
                <h3>Color: <span id="color-seleccionado">{{ product.options[0].name }}</span></h3>
                <div class="opciones-colores">
                    {% assign unique_colors = "" %}
                    {% for variant in product.variants %}
                        {% unless unique_colors contains variant.option1 %}
                            <div class="opcion-color" data-color="{{ variant.option1 }}" data-image="{{ variant.image.src | img_url: 'large' }}" style="background-image: url('{{ variant.image.src | img_url: 'small' }}')" onclick="cambiarColor('{{ variant.option1 }}', '{{ variant.image.src }}', {{ variant.price | money_without_currency }})"></div>
                            {% assign unique_colors = unique_colors | append: variant.option1 | append: "," %}
                        {% endunless %}
                    {% endfor %}
                </div>
            </div>

            <div class="tallas">
                <h3>Talla: <span id="talla-seleccionada">Selecciona una talla</span></h3>
                <div class="opciones-tallas">
                    {% assign unique_sizes = "" %}
                    {% for variant in product.variants %}
                        {% unless unique_sizes contains variant.option2 %}
                            <button class="talla" data-talla="{{ variant.option2 }}" onclick="cambiarTalla('{{ variant.option2 }}', {{ variant.price | money_without_currency }})">{{ variant.option2 }}</button>
                            {% assign unique_sizes = unique_sizes | append: variant.option2 | append: "," %}
                        {% endunless %}
                    {% endfor %}
                </div>
            </div>

            <div class="cantidad">
                <h3>Cantidad</h3>
                <div class="contador">
                    <button class="btn-cantidad" id="btn-menor">-</button>
                    <span id="cantidad" class="cantidad-numero">1</span>
                    <button class="btn-cantidad" id="btn-mayor">+</button>
                </div>
            </div>

            <div class="acciones">
                <button class="btn-carrito">Añadir a la cesta</button>
            </div>
        </div>
        <div data-rapi-id="rapi_62669dc1802270"></div>
    </div>

    <div class="cart-modal" style="display:none;">
        <h2>Carrito de compras</h2>
        <p>Producto añadido al carrito</p>
        <button onclick="closeCart()">Cerrar Carrito</button>
    </div>

    <div class='jdgm-carousel-wrapper'> 
        {% assign jm_metafields = shop.metafields.judgeme %} 
        <div class='jdgm-carousel-title-and-link'> 
        <h2 class='jdgm-carousel-title'>Let customers speak for us</h2> 
        <span class='jdgm-all-reviews-rating-wrapper' href='javascript:void(0)'> 
            <span style='display:block' data-score='{{ jm_metafields.all_reviews_rating }}' class='jdgm-all-reviews-rating' aria-label='{{ jm_metafields.all_reviews_rating }} stars' tabindex='0' role='img'></span> 
            <span style='display: block' class='jdgm-carousel-number-of-reviews' data-number-of-reviews='{{ jm_metafields.all_reviews_count }}'> 
    from {{ shop.metafields.judgeme.all_reviews_count }} reviews 
            </span> 
        </span> 
        </div> 
        {{ jm_metafields.featured_carousel }} 
    </div> 

    <script id="ProductJson-product-template" type="application/json">
        {{ product | json }}
    </script>
    <script src="{{ 'cart.js' | asset_url }}"></script>
    <script src="{{ 'main.js' | asset_url }}"></script>
    <script src="{{ 'product.js' | asset_url }}"></script>
    
</body>
</html>
